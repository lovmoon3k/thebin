gawk -F'/' '{fn[$NF]++ ; c++} END{ln=1; PROCINFO["sorted_in"]="@val_num_desc"; for (i in fn) printf "%2d) %-20s |%4s\n", ln++, i, fn[i] } END{print "\nTotal number of files:", c}' <(find $PWD -type f -printf "%h\n")|column -s $'|' -t