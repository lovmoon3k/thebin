utf8.len=string.utf8len;local a="igs.20"local b="igs.18"local c="igs.40"local d="igs.15"local e="igs.18"local f="igs.18"local g="igs.22"local h="igs.18"local i="igs.20"local j="igs.17"local k="igs.40"local l="igs.20"local m="igs.15"local n="igs.15"local o="igs.20"local p="igs.17"local q="igs.17"local r="igs.17"local s=r;local t="igs.17"local u="igs.22"local v="igs.18"local w="igs.15"local x="igs.15"local y="igs.18"local z="igs.24"local A="igs.18"local B=A;local C="igs.18"local function D(E)return E end;local function F(G)return Material(G,"smooth")end;local H=F("hrp/gui/donate/close.png")local I=F("hrp/gui/donate/shop.png")local J=F("hrp/gui/donate/shop_unactive.png")local K=F("hrp/gui/donate/profile.png")local L=F("hrp/gui/donate/profile_unactive.png")local M=F("hrp/gui/donate/go.png")local N=F("hrp/gui/donate/grad.png")local O=F("hrp/gui/donate/buy.png")local P=F("hrp/gui/donate/heart.png")local Q=F("hrp/gui/donate/coupon.png")local R={}function R.FancyTerm(S)local T=IGS.TermToStr(S)if T=="бесконечно"then return"НАВСЕГДА"elseif T=="единоразово"then return"ОДНОРАЗОВО"else return"НА "..T end end;file.CreateDir("dc_cloudgamingdonate")local U={["close.png"]="https://i.imgur.com/e0RfeLy.png",["closeHover.png"]="https://i.imgur.com/xJnHQ9f.png",["store.png"]="https://i.imgur.com/ZRpEWpo.png",["inventory.png"]="https://i.imgur.com/Wn1LDOd.png",["profile.png"]="https://i.imgur.com/bPOh33q.png",["cart.png"]="https://i.imgur.com/4z9RWdB.png",["deposit.png"]="https://i.imgur.com/U81QgPm.png",["logo.png"]="https://i.imgur.com/wyMEmNs.png",["transactions.png"]="https://i.imgur.com/OTkRDpU.png",["smile.png"]="https://i.imgur.com/gKQKBf9.png"}local V={}timer.Simple(0.2,function()for W,X in pairs(U)do V[W]=V[W]or Material("../data/dc_cloudgamingdonate/"..W)if V[W]:IsError()then http.Fetch(X,function(Y)file.Write("dc_cloudgamingdonate/"..W,Y)end)timer.Simple(4,function()V[W]=Material("../data/dc_cloudgamingdonate/"..W)end)end end end)local Z;local _={{name="Магазин",icon="store.png",panel="dc_cloudshop"},{name="Инвентарь",icon="inventory.png",panel="dc_cloudinventory"},{name="Транкзакции",icon="transactions.png",panel="dc_transactions"},{name="Профиль",icon="profile.png",panel="dc_cloudprofile"}}local function a0()local _={}_["Все"]=_["Все"]or{}for W,X in pairs(IGS.GetItems())do _[X.category or"Прочее"]=_[X.category or"Прочее"]or{}table.insert(_[X.category or"Прочее"],X)table.insert(_["Все"],X)local a1=""if X.image_url then a1=string.find(X.image_url,".png")and".png"or".jpg"end;V[X.uid]=Material("../data/dc_cloudgamingdonate/"..X.uid..a1)if X.image_url and V[X.uid]:IsError()then http.Fetch(X.image_url,function(Y)file.Write("dc_cloudgamingdonate/"..X.uid..a1,Y)end)timer.Simple(4,function()V[X.uid]=Material("../data/dc_cloudgamingdonate/"..X.uid..a1)end)end end;return _ end;timer.Simple(0.5,a0)local function a2(a3,a4)return math.Truncate(tonumber(a3)or a4,2)end;local a5;function IGS.WIN.Deposit(a6)if IsValid(a5)then return end;a6=tonumber(a6)hook.Run("IGS.OnDepositWinOpen",a6)local a7=true;local a8=math.max(IGS.GetMinCharge(),a2(a6,0))a5=uigs.Create("igs_frame",function(self)self:SetSize(450,400)self:RememberLocation("igs_deposit")self:SetTitle("Автодонат от gm-donate.ru")self:MakePopup()uigs.Create("DLabel",function(a9)a9:SetSize(a7 and 450 or 180,25)a9:SetPos(a7 and 0 or 10,self:GetTitleHeight())a9:SetText(a7 and"Введите ниже сумму пополнения счета"or"Рубли")a9:SetFont("igs.22")a9:SetTextColor(IGS.col.HIGHLIGHTING)a9:SetContentAlignment(2)end,self)self.real_m=uigs.Create("DTextEntry",self)self.real_m:SetPos(10,50)self.real_m:SetSize(a7 and 450-10-10 or 180,30)self.real_m:SetNumeric(true)self.real_m.OnChange=function(aa)if a7 then return end;self.curr_m:SetValue(IGS.PriceInCurrency(a2(aa:GetValue(),0)))end;self.real_m.Think=function()local ab=tonumber(self.real_m:GetValue())if a7 then self.purchase:SetText("Пополнить счет на "..a2(ab,0).." руб")else local ac=tonumber(self.curr_m:GetValue())self.purchase:SetText("Пополнить на "..IGS.SignPrice(a2(ac,0)).." за "..a2(ab,0).." руб")end;self.purchase:SetActive(ab and ab>0)end;if not a7 then uigs.Create("DLabel",function(ad)ad:SetSize(50,30)ad:SetPos(200,50)ad:SetText("=")ad:SetFont("igs.40")ad:SetTextColor(IGS.col.TEXT_HARD)ad:SetContentAlignment(5)end,self)end;self.purchase=uigs.Create("igs_button",function(ae)local af,ag=self.real_m:GetPos()ae:SetSize(400,40)ae:SetActive(true)ae:SetPos((self:GetWide()-ae:GetWide())/2,ag+self.real_m:GetTall()+10)ae.DoClick=function()local ah=a2(self.real_m:GetValue())if not ah then self.log:AddRecord("Указана некорректная сумма пополнения",false)return elseif ah<a8 then self.log:AddRecord("Минимальная сумма пополнения "..PL_MONEY(a8),false)return end;self.log:AddRecord("Запрос цифровой подписи запроса от сервера...")IGS.GetPaymentURL(ah,function(ai)Derma_Query("Выберите способ пополнения","Пополнение баланса","Напрямую через QIWI",function()IGS.OpenURL(ai,"Процедура пополнения счета")end,"Через сайт (доступен PayPal)",function()IGS.OpenURL("https://site.cgaming.ru/store/credits","Процедура пополнения счета")end,"Отмена")if not IsValid(self)then return end;self.log:AddRecord("Подпись получена. начинаем процесс оплаты")timer.Simple(.7,function()self.log:AddRecord("Счет пополнится моментально или после перезахода")end)end)end end,self)if not a7 then uigs.Create("DLabel",function(aj)aj:SetSize(180,25)aj:SetPos(self:GetWide()-10-aj:GetWide(),self:GetTitleHeight())aj:SetText(IGS.C.CURRENCY_NAME)aj:SetFont("igs.22")aj:SetTextColor(IGS.col.HIGHLIGHTING)aj:SetContentAlignment(2)end,self)self.curr_m=uigs.Create("DTextEntry",self)self.curr_m:SetPos(self:GetWide()-10-self.real_m:GetWide(),50)self.curr_m:SetSize(self.real_m:GetWide(),self.real_m:GetTall())self.curr_m:SetNumeric(true)self.curr_m.OnChange=function(aa)self.real_m:SetValue(IGS.RealPrice(a2(aa:GetValue(),0)))end end;self.real_m:SetValue(a8)self.real_m:OnChange()self.log=uigs.Create("igs_scroll",function(ak)ak:SetSize(250,200)ak:SetPos(10,self:GetTall()-ak:GetTall()-10)function ak:AddRecord(al,am)local an=am==true and IGS.col.LOG_SUCCESS or am==false and IGS.col.LOG_ERROR or IGS.col.LOG_NORMAL;if am or am==false then self:GetParent():RequestFocus()self:GetParent():MakePopup()end;return ak:AddItem(uigs.Create("Panel",function(ao)al="> "..os.date("%H:%M:%S",os.time()).."\n"..al;local ap=2;for a3,aq in ipairs(string.Wrap("igs.18",al,ak:GetWide()-0-0))do uigs.Create("DLabel",function(ar)ar:SetPos(0,ap)ar:SetText(aq)ar:SetFont("igs.18")ar:SizeToContents()ar:SetTextColor(a3==1 and IGS.col.HIGHLIGHTING or an)ap=ap+ar:GetTall()end,ao)end;ao:SetTall(ap+2)ak:ScrollTo(ak:GetCanvas():GetTall())end,ak))end end,self)local as=uigs.Create("DLabel",function(at)local au,av=self.log:GetPos()at:SetSize(self.log:GetWide(),22)at:SetPos(au,av-at:GetTall())at:SetText("Лог операций")at:SetTextColor(IGS.col.HIGHLIGHTING)at:SetFont("igs.22")at:SetContentAlignment(1)end,self)local af,aw=as:GetPos()uigs.Create("DPanel",function(aq)aq:SetPos(10,aw-2-10)aq:SetSize(self:GetWide()-aq:GetPos()*2,2)aq.Paint=function(aa,ax,ay)draw.RoundedBox(0,0,0,ax,ay,IGS.col.SOFT_LINE)end end,self)local az=uigs.Create("igs_button",function(aA)local af,av=self.log:GetPos()aA:SetSize(170,30)aA:SetPos(self:GetWide()-10-aA:GetWide(),av-20)aA:SetText("Активировать купон")aA.DoClick=function()IGS.WIN.ActivateCoupon()end end,self)local function ak(aB,al,aC)timer.Simple(aB,function()if not IsValid(self.log)then return end;self.log:AddRecord(al,aC)end)end;ak(0,"Открыт диалог пополнения счета",nil)ak(math.random(3),"Соединение установлено!",true)ak(math.random(20,40),"Деньги будут зачислены мгновенно и автоматически",nil)end)return a5 end;local aD=Color(10,10,10,150)local aE=Color(222,170,12,200)local aF=Color(35,35,35,255)local aG=Color(50,50,50,255)local aH=Color(10,10,10,150)local aI=Color(0,150,0,200)local aJ=Color(200,200,200)local aK=Color(0,0,0)local aL=Color(200,200,200)local aM=Color(255,255,255)local aN=Color(222,170,12,150)local aO=Color(245,0,0,255)local aP=Color(200,0,0,100)local aQ=Color(200,0,0,150)local aR={}local function aS(aT,al,aU,ap,aV)aV=aV or g;local aW=vgui.Create("DLabel",aT)aW:SetFont(aV)aW:SetText(al)aW:SetPos(aU,ap)aW:SizeToContents()aW:SetCursor('hand')aW.OnMousePressed=function(aa)SetClipboardText(aa:GetText())end;return aW end;local aX=draw.SimpleText;local aY=Color(200,200,200)function aR:Init()local aZ=LocalPlayer()local a_=vgui.Create("DPanel",self)a_:Dock(TOP)a_:SetTall(200)a_:TDLib():ClearPaint():Background(aG):Blur(2)local b0=vgui.Create("DPanel",self)b0:Dock(TOP)b0:SetTall(50)b0:DockMargin(0,1,0,1)b0:TDLib():ClearPaint():Background(aD):Blur(2):Text("Активные Покупки",g,Color(200,200,200))IGS.GetMyPurchases(function(b1)if not IsValid(self)then return end;if#b1==0 then local b2=vgui.Create("Panel",self)b2:Dock(FILL)b2:TDLib():On("Paint",function(aa,ax,ay)surface.SetTextColor(aY)surface.SetTextPos(ax/2-240,ay/2-80)surface.DrawText("Здесь будут отображаться ваши активные покупки")surface.SetTextPos(ax/2-240,ay/2-55)surface.DrawText("Не самое ли подходящее время, чтобы совершить первую?")surface.SetTextPos(ax/2-240,ay/2-30)surface.DrawText("Табличка сразу станет красивее. Честно-честно")surface.SetDrawColor(255,255,255,255)surface.SetMaterial(V['smile.png'])surface.DrawTexturedRect(ax/2-64,ay-182,128,128)end)return end;local b0=vgui.Create("DPanel",self)b0:Dock(TOP)b0:SetTall(30)b0:DockMargin(0,1,0,1)b0:TDLib():ClearPaint():Background(aD):Blur(2):On("Paint",function(aa,ax,ay)draw.SimpleText("Имя сервера",g,10,ay/2,aY,TEXT_ALIGN_LEFT,1)draw.SimpleText("ID в системе",g,ax*.4,ay/2,aY,1,1)draw.SimpleText("Куплен",g,ax*.6,ay/2,aY,1,1)draw.SimpleText("Истекает",g,ax*.75,ay/2,aY,1,1)draw.SimpleText("название",g,ax-10,ay/2,aY,TEXT_ALIGN_RIGHT,1)end)local b3=vgui.Create("DScrollPanel",self)b3:Dock(FILL)for a3,X in ipairs(b1)do local b4=IGS.ServerName(X.server)local b5=IGS.GetItemByUID(X.item)local b6=b5.isnull and X.item or b5:Name()local b7=IGS.TimestampToDate(X.expire)or"Никогда"local b8=IGS.TimestampToDate(X.purchase)or"Никогда"if utf8.len(b4)>20 then b4=utf8.sub(b4,1,20)b4=b4 .."..."end;local b0=b3:Add("DPanel")b0:Dock(TOP)b0:SetTall(25)b0:DockMargin(0,1,0,1)b0:TDLib():ClearPaint():Background(aD):Blur(2):On("Paint",function(aa,ax,ay)draw.SimpleText(b4,g,10,ay/2,aY,TEXT_ALIGN_LEFT,1)draw.SimpleText(X.id,g,ax*.4,ay/2,aY,1,1)draw.SimpleText(b8,g,ax*.6,ay/2,aY,1,1)draw.SimpleText(b7,g,ax*.75,ay/2,aY,1,1)draw.SimpleText(b6,g,ax-10,ay/2,aY,TEXT_ALIGN_RIGHT,1)end)end end)local b9=vgui.Create("DPanel",self)b9:TDLib()b9:SetSize(184,184)b9:SetPos(10,10)b9:CircleAvatar():SetPlayer(LocalPlayer(),184)aS(self,LocalPlayer():SteamID(),b9:GetWide()-5,20)local ba=IGS.PlayerLVL(aZ)local bb=aZ:IGSFunds()local bc=not ba and IGS.LVL.MAP[1]or ba:GetNext()aS(self,"Статус: "..(ba and ba:Name()or"Никто :("),b9:GetWide()+10,50)if bc then local bd=bc:Description()aS(self,"След. статус: "..bc:Name()..(bd and"\n\n%s":format(bd)or"").." (".."Нужно: "..bc:Cost()-IGS.TotalTransaction(aZ).." руб"..")",b9:GetWide()+18,80)end;local aA=vgui.Create("DButton",self)aA:SetSize(220,30)aA:SetPos(b9:GetWide()+5,150)aA:SetText("")aA:TDLib():ClearPaint():Background(Color(22,87,128),5):FadeHover(Color(7,107,171)):Text("Активировать купон",g):On("DoClick",function(aa)LocalPlayer():EmitSound("UI/buttonclick.wav",100,100)IGS.WIN.ActivateCoupon()end)end;vgui.Register("dc_cloudprofile",aR,"Panel")local aR={}local aX=draw.SimpleText;local aY=Color(200,200,200)function aR:Init()local be=vgui.Create("DPanel",self)be:Dock(TOP)be:SetTall(50)be:TDLib():ClearPaint():Background(aD,3):Blur(2):On("Paint",function(aa,ax,ay)aX("Сервер",o,ax*.1,ay/2,aY,1,1)aX("Предмет",o,ax*.35,ay/2,aY,1,1)aX("Куплен",o,ax*.5,ay/2,aY,1,1)aX("Истечет",o,ax*.67,ay/2,aY,1,1)aX("Сумма",o,ax*.83,ay/2,aY,1,1)aX("Баланс",o,ax*.95,ay/2,aY,1,1)end)local b3=vgui.Create("DScrollPanel",self)b3:Dock(FILL)local bb=LocalPlayer():IGSFunds()IGS.GetMyTransactions(function(bf)if not IsValid(b3)then return end;for a3,X in ipairs(bf)do X.note=X.note or"-"local function bg(bh)local b5=IGS.GetItemByUID(bh)return b5.isnull and bh or b5:Name()end;if X.note:StartWith("A: ")or X.note:StartWith("C: ")then goto bi end;if not X.note:StartWith("P: ")then goto bi end;bb=bb-X.sum;local b4=IGS.ServerName(X.server)local b5=IGS.GetItemByUID(bg(X.note:sub(4)))local b6=b5.isnull and X.note:sub(4)or b5:Name()if not X.note:StartWith("P: ")then goto bi end;bb=bb-X.sum;local b4=IGS.ServerName(X.server)local b5=IGS.GetItemByUID(bg(X.note:sub(4)))local b6=b5.isnull and X.note:sub(4)or b5:Name()local bj=function(bk,aU,ap)draw.SimpleText(bk,s,aU,ap,color_white,1)end;local bl=vgui.Create("DPanel",self)bl:Dock(TOP)bl:SetTall(30)if utf8.len(b4)>20 then b4=utf8.sub(b4,1,20)b4=b4 .."..."end;local bm=bb;bl:DockMargin(0,1,0,0)bl:TDLib():ClearPaint():Background(aG,3):On("Paint",function(aa,ax,ay)aX(b4,o,ax*.12,ay/2,aY,1,1)aX(b6,o,ax*.35,ay/2,aY,1,1)aX(IGS.TimestampToDate(X.date)or"Никогда",o,ax*.5,ay/2,aY,1,1)aX(b5.termin~=0 and IGS.TimestampToDate(X.date+b5.termin*86400)or"Никогда",o,ax*.67,ay/2,aY,1,1)aX(IGS.SignPrice(X.sum),o,ax*.83,ay/2,aY,1,1)aX(IGS.SignPrice(bm),o,ax-5,ay/2,aY,TEXT_ALIGN_RIGHT,1)end)b3:AddItem(bl)::bi::end end)end;vgui.Register("dc_transactions",aR,"Panel")local bn={}local bo;local function bp(S)if IsValid(bo)then bo:Remove()end;PrintTable(S)bo=vgui.Create("DFrame")bo:SetSize(400,500)bo:Center()bo:MakePopup()bo:SetTitle("")bo:ShowCloseButton(false)bo:TDLib():ClearPaint():Background(aF,5):Blur(2):On("Paint",function(aa,ax,ay)draw.RoundedBox(1,0,0,ax,28,aG)draw.SimpleText(S.name,e,ax/2,5,color_white,1,TEXT_ALIGN_TOP)end)local bq=vgui.Create("DButton",bo)bq:SetSize(24,24)bq:SetPos(bo:GetWide()-26,2)bq:SetText('')bq:TDLib():ClearPaint():On("Paint",function(aa,ax,ay)surface.SetDrawColor(color_white)surface.SetMaterial(aa:IsHovered()and V["closeHover.png"]or V["close.png"])surface.DrawTexturedRect(0,0,ax,ay)end):On("DoClick",function()bo:Remove()end)surface.SetFont("ChatFont")local br,bs=surface.GetTextSize(S.price)local bt=Color(255,255,255)local bu=vgui.Create("DPanel",bo)bu:Dock(TOP)bu:SetTall(240)bu:DockMargin(1,1,1,10)bu:TDLib():ClearPaint():Background(aD):Blur(4):Material(V[S.uid]):On("Paint",function(aa,ax,ay)if S.discounted_from then local bv=draw.SimpleText("₽"..S.discounted_from,"ChatFont",10,ay-45,aO,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)local bw,bx=7,ay-48-20/2;surface.SetDrawColor(IGS.col.TEXT_SOFT)surface.DrawLine(bw,bx,bv+13,bx+6)bt.g=100;bt.r=math.sin(CurTime()+1)*100;bt.b=100-math.sin(CurTime()+1)*100;draw.RoundedBox(5,5,ay-40,br+20,30,bt)draw.SimpleText("₽"..S.price,"ChatFont",10,ay-15,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)else draw.RoundedBox(5,5,ay-40,br+20,30,aI)draw.SimpleText("₽"..S.price,"ChatFont",10,ay-15,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)end end)local by=vgui.Create("DButton",bu)by:SetSize(120,30)by:SetText("")by:SetPos(br+30,bu:GetTall()-40)by:TDLib():ClearPaint():Background(Color(66,133,180),5):Text(R.FancyTerm(S.termin),l)local bk=string.Wrap(p,S.description,400)for W,X in ipairs(bk)do local bz=vgui.Create("DLabel",bo)bz:SetText(X)bz:SetFont(p)bz:SizeToContents()bz:Dock(TOP)end;local bA=vgui.Create("DButton",bo)bA:SetText("")bA:Dock(BOTTOM)bA:SetSize(120,40)bA:SetTall(45)bA:DockMargin(5,1,5,5)local b5=IGS.GetItemByUID(S.uid)local bB=S.price;local bC=-1;bA:TDLib():ClearPaint():Background(aH):FadeHover(aI):On("Paint",function(aa,ax,ay)surface.SetDrawColor(aa:IsHovered()and aK or aJ)surface.SetMaterial(V["cart.png"])local bD,bE=draw.SimpleText("КУПИТЬ",C,ax/2,ay/2,color_white,1,1)surface.DrawTexturedRect(ax/2-bD-10,ay/2-16,32,32)end):On("DoClick",function()if bC>=CurTime()then return end;bC=CurTime()+1;IGS.Purchase(S.uid,function(bF,bG)bC=-1;if bF then local need=bB-LocalPlayer():IGSFunds()surface.PlaySound("ambient/voices/citizen_beaten1.wav")IGS.BoolRequest("Недостаточно денег","Вам не хватает %s для покупки %s.\nЖелаете мгновенно пополнить счет?":format(PL_IGS(need),b5:Name()),function(bH)if bH then IGS.WIN.Deposit(need,true)surface.PlaySound("vo/npc/male01/yeah02.wav")end end):ShowCloseButton(true)surface.PlaySound("ambient/voices/citizen_beaten1.wav")return end;S.Purchased=S.Purchased or 0;S.Purchased=S.Purchased+1;if not b5:IsStackable()then if not IGS.C.Inv_Enabled then IGS.ShowNotify("Спасибо за покупку. Это было просто, правда? :)","Успешная покупка")return end;IGS.BoolRequest("Успешная покупка","Спасибо за покупку. Она находится в вашем /donate инвентаре.\n\nАктивировать ее сейчас?",function(bH)if not bH then return end;IGS.ProcessActivate(bG)end)end;surface.PlaySound("ambient/office/coinslot1.wav")end)end)end;function bn:Init()self:TDLib():ClearPaint()local b3=vgui.Create("DScrollPanel",self)b3:Dock(FILL)b3:TDLib():HideVBar()local bI=vgui.Create("DHorizontalScroller",self)bI:Dock(TOP)bI:SetTall(40)bI:SetOverlap(-4)local bJ=nil;for bK,bL in SortedPairs(a0())do local bM=bI:Add("DButton")bM:Dock(LEFT)bM:SetWide(100)bM:SetFont(a)bM:DockMargin(1,1,0,1)bI:AddPanel(bM)surface.SetFont(a)local aU,ap=surface.GetTextSize(bK)bM:SetText(bK)if aU+10<100 then aU=90 end;bM:SetWide(aU+10)bM:SetTextColor(color_white)bM:TDLib():ClearPaint():FadeHover(aE):On("Paint",function(aa,ax,ay)if aa:IsHovered()or bJ==aa then draw.RoundedBox(1,0,0,ax,ay,aE)end end)local bN=function(aa)b3:Clear()bJ=aa;local bO=vgui.Create("DIconLayout",b3)bO:Dock(FILL)bO:DockMargin(5,5,5,5)bO:SetSpaceY(5)bO:SetSpaceX(5)for bP,Y in pairs(bL)do local bQ=bO:Add("DPanel")bQ:SetSize(200,200)bQ:SetCursor('hand')surface.SetFont("ChatFont")local br,bs=surface.GetTextSize(Y.price)local bt=table.Copy(color_white)bQ:TDLib():ClearPaint():Background(aD,5):Blur(4):On("OnMousePressed",function(aa)surface.PlaySound("garrysmod/ui_click.wav")bp(Y)end):On("Paint",function(aa,ax,ay)surface.SetDrawColor(aa:IsHovered()and aM or aL)surface.SetMaterial(V[Y.uid])surface.DrawTexturedRect(0,0,ax,ay)if Y.discounted_from then local bv=draw.SimpleText("₽"..Y.discounted_from,"ChatFont",10,ay-45,aO,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)local bw,bx=7,ay-48-20/2;surface.SetDrawColor(IGS.col.TEXT_SOFT)surface.DrawLine(bw,bx,bv+13,bx+6)bt.g=100;bt.r=math.sin(CurTime()+1)*100;bt.b=100-math.sin(CurTime()+1)*100;draw.RoundedBox(5,5,ay-40,br+20,30,bt)draw.SimpleText("₽"..Y.price,"ChatFont",10,ay-15,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)else draw.RoundedBox(5,5,ay-40,br+20,30,aI)draw.SimpleText("₽"..Y.price,"ChatFont",10,ay-15,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_BOTTOM)end end)local be=vgui.Create("DPanel",bQ)be:Dock(TOP)be:DockMargin(2,2,2,2)be:SetTall(25)be:TDLib():ClearPaint():Background(Color(26,66,71),5):Text(Y.name,g)local by=vgui.Create("DButton",bQ)by:SetSize(115,30)by:SetText("")by:SetPos(bQ:GetWide()-120,bQ:GetTall()-40)by:TDLib():ClearPaint():Background(Color(66,133,180),5):Text(R.FancyTerm(Y.termin),l)end end;bM:On("DoClick",function(aa)LocalPlayer():EmitSound("UI/buttonclick.wav",100,300)bN(aa)end)if bJ==nil then bN(bM)end end end;vgui.Register("dc_cloudshop",bn,"DPanel")local bR={}function bR:Init()self:TDLib():ClearPaint()local b3=vgui.Create("DScrollPanel",self)b3:Dock(FILL)b3:TDLib():HideVBar()local bJ;local function bN(aa)b3:Clear()IGS.GetInventory(function(bL)if table.Count(bL)<=0 then self:Text("Инвентарь пуст")return end;local bO=vgui.Create("DIconLayout",b3)bO:Dock(FILL)bO:DockMargin(5,5,5,5)bO:SetSpaceY(5)bO:SetSpaceX(5)for bP,Y in pairs(bL)do local bQ=bO:Add("DPanel")bQ:SetSize(200,200)surface.SetFont("ChatFont")local br,bs=surface.GetTextSize(Y.item.price)bQ:TDLib():ClearPaint():Background(aD,5):Blur(4):On("Paint",function(aa,ax,ay)surface.SetDrawColor(aM)surface.SetMaterial(V[Y.item.uid])surface.DrawTexturedRect(0,0,ax,ay)end)local be=vgui.Create("DPanel",bQ)be:Dock(TOP)be:DockMargin(2,2,2,2)be:SetTall(25)be:TDLib():ClearPaint():Background(Color(26,66,71),5):Text(Y.item.name,g)local by=vgui.Create("DButton",bQ)by:Dock(BOTTOM)by:SetTall(20)by:DockMargin(2,2,2,5)by:SetText("")by:TDLib():ClearPaint():Background(aP,5):FadeHover(aQ):Text("ВЫБРОСИТЬ",l):On("DoClick",function(aa)IGS.DropItem(Y.id,function()surface.PlaySound("garrysmod/ui_click.wav")aa:Remove()bN()end)end)local by=vgui.Create("DButton",bQ)by:Dock(BOTTOM)by:SetTall(30)by:DockMargin(2,2,2,5)by:SetText("")by:TDLib():ClearPaint():Background(Color(66,133,180),5):FadeHover(aI):Text("АКТИВИРОВАТЬ",l):On("DoClick",function(aa)IGS.ProcessActivate(Y.id,function(bS)surface.PlaySound("garrysmod/ui_click.wav")if not bS then return end;aa:Remove()bN()end)end)end end)end;bN()end;vgui.Register("dc_cloudinventory",bR,"Panel")function R.Menu()if IsValid(Z)then Z:Close()hook.Run("DC_DonateClose")return end;local ax,ay=1000,700;hook.Run("DC_DonateOpen")if ScrW()<ax then ax=ScrW()end;if ScrH()<ay then ay=ScrH()end;Z=vgui.Create("DPanel")Z:SetSize(ax,ay)Z:SetPos(ScrW()/2-ax/2,ScrH()/2-ay/2)Z:TDLib():ClearPaint():On("Paint",function(aa,ax,ay)draw.RoundedBox(4,0,42,ax,ay-42,aF)end)gui.EnableScreenClicker(true)local bq=vgui.Create("DButton",Z)bq:SetSize(40,40)bq:SetPos(Z:GetWide()-42,2)bq:SetText('')bq:TDLib():ClearPaint():On("Paint",function(aa,ax,ay)surface.SetDrawColor(color_white)surface.SetMaterial(aa:IsHovered()and V["closeHover.png"]or V["close.png"])surface.DrawTexturedRect(0,0,ax,ay)end):On("DoClick",function()surface.PlaySound("garrysmod/ui_click.wav")gui.EnableScreenClicker(false)Z:Remove()hook.Run("DC_DonateClose")end)local bT=vgui.Create("Panel",Z)bT:Dock(FILL)bT:DockMargin(0,42,0,0)bT:TDLib():Blur(3)local bU=vgui.Create("DPanel",bT)bU:Dock(LEFT)bU:SetWide(ax*.14)bU:TDLib():ClearPaint():Background(Color(20,20,20,100),3)local bV=vgui.Create("Panel",bT)bV:Dock(FILL)bV:DockMargin(5,5,5,5)local bJ=nil;local function bW(b2,bK)bV:Clear()bJ=bK;local ae=vgui.Create(b2,bV)ae:Dock(FILL)end;bW(_[1].panel)local bX=bU:Add("Panel")bX:Dock(TOP)bX:SetTall(100)bX:DockMargin(7,7,7,7)bX:TDLib():On("Paint",function(aa,ax,ay)if aa:IsHovered()then aa:SetCursor('hand')end;surface.SetDrawColor(aa:IsHovered()and aM or aL)surface.SetMaterial(V['logo.png'])surface.DrawTexturedRect(0,0,ax,ay)end):On("OnMousePressed",function(aa)surface.PlaySound("garrysmod/ui_click.wav")gui.OpenURL("https://discord.gg/cloudgaming")end)local bY=hook.Run("DC_DonateOpenCategorises",_)if bY then table.insert(_,bY)end;for W,X in ipairs(_)do local Y={}local bK=bU:Add("DButton")bK:Dock(TOP)bK:SetTall(ax*.1)bK:SetText("")bK:DockMargin(5,2,5,0)bK:TDLib():ClearPaint():Background(aD):FadeHover(aE):On("Paint",function(aa,ax,ay)if aa:IsHovered()or bJ==aa then draw.RoundedBox(1,0,0,ax,ay,aE)end;surface.SetDrawColor((aa:IsHovered()or bJ==aa)and aK or aJ)surface.SetMaterial(V[X.icon])surface.DrawTexturedRect(ax/2-25,ay/2-25,50,50)end):On("DoClick",function(aa)if bJ==aa then return end;LocalPlayer():EmitSound("UI/buttonclick.wav",100,300)bW(X.panel,bK)end)if bJ==nil then bW(X.panel,bK)end end;local bA=vgui.Create("DButton",bU)bA:Dock(BOTTOM)bA:SetText("")bA:SetTall(40)bA:DockMargin(5,1,5,5)bA:TDLib():ClearPaint():Background(aH):FadeHover(aI):On("Paint",function(aa,ax,ay)surface.SetDrawColor(aa:IsHovered()and aK or aJ)surface.SetMaterial(V["deposit.png"])surface.DrawTexturedRect(ax-26,ay/2-12,24,24)draw.SimpleText("₽"..LocalPlayer():IGSFunds(),"ChatFont",5,ay/2,color_white,TEXT_ALIGN_LEFT,1)end):On("DoClick",function()IGS.WIN.Deposit(need,true)end)return Z end;local bZ=IGS.UI;IGS.UI=R.Menu;concommand.Add("donate_menu",function()R.Menu()end)concommand.Add("donate_menu_old",function()bZ()end)