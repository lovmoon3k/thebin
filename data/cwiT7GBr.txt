use std::io;
use core::num;
use std::io::Write;
use std::process;
use std::u8;
use rand::prelude::*;

fn exit_program(msg: &str) -> u8 {
    println!("{}", msg);
    process::exit(0x0100);
}

fn main() -> io::Result<()> {
    print!("Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 10: ");
    io::stdout().flush().unwrap();

    let mut user_input = String::new();
    let mut rng = rand::thread_rng();
    let stdin = io::stdin();
    stdin.read_line(&mut user_input)?;

    let guessed_num = user_input.trim().parse::<u8>();
    let guessed_num = match guessed_num {
        Ok(num) => num,
        Err(err) => match err.kind() {
            num::IntErrorKind::PosOverflow => exit_program("Ğ’Ñ‹ Ğ²Ğ²ĞµĞ»Ğ¸ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ˜¡ğŸ˜¡ğŸ˜¡"),
            num::IntErrorKind::Empty => exit_program("Ğ’Ñ‹ Ğ½Ğµ Ğ²Ğ²ĞµĞ»Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ˜¡ğŸ˜¡ğŸ˜¡"),
            num::IntErrorKind::InvalidDigit => exit_program("Ğ’Ñ‹ Ğ²Ğ²ĞµĞ»Ğ¸ Ğ½ĞµÑ‡Ğ¸ÑĞ»Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ! ğŸ˜¡ğŸ˜¡ğŸ˜¡"),
            other => panic!("ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°: {:?}", other),
        },
    };

    if guessed_num > 10 {
        exit_program("Ğ’Ñ‹ Ğ²Ğ²ĞµĞ»Ğ¸ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ˜¡ğŸ˜¡ğŸ˜¡");
    }

    if guessed_num == 0 {
        exit_program("Ğ’Ñ‹ Ğ²Ğ²ĞµĞ»Ğ¸ cĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ˜¡ğŸ˜¡ğŸ˜¡");
    }

    if guessed_num == rng.gen_range(1..10) {
        println!("Ğ’Ñ‹ ÑƒĞ³Ğ°Ğ´Ğ°Ğ»Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ¥³ğŸ¥³ğŸ¥³");
    } else {
        println!("Ğ’Ñ‹ Ğ½Ğµ ÑƒĞ³Ğ°Ğ´Ğ°Ğ»Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾! ğŸ˜­ğŸ˜­ğŸ˜­");
    }

    Ok(())
} 